/* global wp, ernestGutenbergConfig */

'use strict';

const {
  useEffect,
  useState
} = wp.element;
const {
  registerBlockType
} = wp.blocks;
const {
  ToggleControl,
  PanelBody,
  Placeholder
} = wp.components;
const {
  InspectorControls
} = wp.blockEditor || wp.editor;
registerBlockType('ernest/table-block', {
  title: ernestGutenbergConfig.i18n.title,
  description: ernestGutenbergConfig.i18n.description,
  category: 'widgets',
  attributes: {
    displayId: {
      type: 'boolean',
      default: true
    },
    displayFirstName: {
      type: 'boolean',
      default: true
    },
    displayLastName: {
      type: 'boolean',
      default: true
    },
    displayEmail: {
      type: 'boolean',
      default: true
    },
    displayDate: {
      type: 'boolean',
      default: true
    }
  },
  edit: ({
    attributes,
    setAttributes
  }) => {
    const {
      displayId,
      displayFirstName,
      displayLastName,
      displayEmail,
      displayDate
    } = attributes;
    const toggleAttribute = attribute => value => {
      setAttributes({
        [attribute]: value
      });
    };
    return [React.createElement(Placeholder, null, React.createElement("h1", null, "Ernest API Table")), React.createElement(InspectorControls, null, React.createElement(PanelBody, {
      title: "Settings"
    }, React.createElement(ToggleControl, {
      label: "Display ID column",
      checked: displayId,
      onChange: toggleAttribute('displayId')
    }), React.createElement(ToggleControl, {
      label: "Display First Name column",
      checked: displayFirstName,
      onChange: toggleAttribute('displayFirstName')
    }), React.createElement(ToggleControl, {
      label: "Display Last Name column",
      checked: displayLastName,
      onChange: toggleAttribute('displayLastName')
    }), React.createElement(ToggleControl, {
      label: "Display Email column",
      checked: displayEmail,
      onChange: toggleAttribute('displayEmail')
    }), React.createElement(ToggleControl, {
      label: "Display Date column",
      checked: displayDate,
      onChange: toggleAttribute('displayDate')
    })))];
  },
  save(props) {
    const {
      attributes: {
        displayId,
        displayFirstName,
        displayLastName,
        displayEmail,
        displayDate
      }
    } = props;
    const dataAttributes = {
      id: displayId,
      firstName: displayFirstName,
      lastName: displayLastName,
      email: displayEmail,
      date: displayDate
    };
    return [React.createElement("h1", null, "Ernest API Table"), React.createElement("table", {
      className: "ernest",
      "data-columns": JSON.stringify(dataAttributes)
    })];
  }
});